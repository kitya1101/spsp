<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>reveal.js</title>
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">
    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <section data-background-iframe="godot/1/index.html"></section>
            <section data-background-iframe="godot/2/index.html"></section>
            <section data-background-iframe="godot/3/index.html"></section>
            <section data-background-iframe="godot/5/index.html"></section>
        </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
        // Reveal.js 초기화
        Reveal.initialize({
            hash: true,
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
        });

        // 슬라이드 전환 시 이벤트 핸들러 추가
        Reveal.addEventListener('slidechanged', function(event) {
            var currentSlide = event.currentSlide;
            var iframeSrc = currentSlide.getAttribute('data-background-iframe');

            // 현재 슬라이드의 data-loaded 속성을 체크하여 iframe이 이미 로드되었는지 확인
            if (iframeSrc && !currentSlide.hasAttribute('data-loaded')) {
                // 슬라이드의 data-background-iframe 속성을 빈 값으로 설정하여 처음에 로드되지 않도록 함
                currentSlide.setAttribute('data-background-iframe', iframeSrc);
                currentSlide.setAttribute('data-loaded', 'true');
                
                // 강제로 Reveal.js의 배경을 다시 렌더링
                Reveal.layout();
            }
        });
    </script>
</body>
</html>
